<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Interactive Student Spinner</title>
  <style>
    body {
      font-family: sans-serif;
      background: linear-gradient(to bottom right, #cfe0fc, #e0d4fc);
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
      min-height: 100vh;
    }
    h1 {
      font-size: 2em;
      margin-bottom: 10px;
    }
    textarea {
      width: 100%;
      max-width: 500px;
      height: 60px;
      margin: 10px 0;
      padding: 10px;
      font-size: 1em;
    }
    button {
      margin: 5px;
      padding: 10px 20px;
      font-size: 1em;
      border: none;
      border-radius: 10px;
      background-color: #6366f1;
      color: white;
      cursor: pointer;
    }
    #spinnerCanvas {
      margin-top: 20px;
      width: 300px;
      height: 300px;
    }
    .history {
      margin-top: 20px;
      text-align: center;
    }
  </style>
</head>
<body>
  <h1>ðŸŽ¯ Student Spinner</h1>
  <textarea id="nameInput" placeholder="Enter up to 30 names separated by commas">Alice,Bob,Charlie,Diana,Evan</textarea>
  <br />
  <button onclick="updateNames()">Update Student List</button>
  <button onclick="spinWheel()">Spin</button>

  <canvas id="spinnerCanvas" width="300" height="300"></canvas>

  <h2 id="selectedName"></h2>
  <div class="history">
    <h3>History</h3>
    <ul id="historyList"></ul>
  </div>

  <script>
    const canvas = document.getElementById("spinnerCanvas");
    const ctx = canvas.getContext("2d");
    const selectedName = document.getElementById("selectedName");
    const historyList = document.getElementById("historyList");
    let students = [];
    let colors = [
      "#8884d8", "#8dd1e1", "#82ca9d", "#ffc658", "#d0ed57", "#a4de6c",
      "#d88884", "#d4a4ff", "#ffd6a5", "#b5ead7", "#ff9aa2", "#cbaacb",
      "#ffdac1", "#e2f0cb", "#b5ead7", "#ffb7b2", "#f3ffe3", "#f9f9f9",
      "#e4f0f5", "#dbe9f4", "#a1c6ea", "#c1e1c1", "#f7cac9", "#92a8d1",
      "#f7786b", "#deeaee", "#b7d7e8", "#f0efeb", "#decba4", "#d5f4e6"
    ];
    let history = [];
    let currentAngle = 0;

    function updateNames() {
      const input = document.getElementById("nameInput").value;
      students = input.split(",").map(name => name.trim()).filter(Boolean).slice(0, 30);
      history = [];
      historyList.innerHTML = "";
      selectedName.textContent = "";
      drawWheel();
    }

    function drawWheel() {
      const angle = (2 * Math.PI) / students.length;
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      students.forEach((student, index) => {
        ctx.beginPath();
        ctx.moveTo(150, 150);
        ctx.fillStyle = colors[index % colors.length];
        ctx.arc(150, 150, 150, angle * index, angle * (index + 1));
        ctx.fill();
        ctx.save();
        ctx.translate(150, 150);
        ctx.rotate(angle * (index + 0.5));
        ctx.fillStyle = "black";
        ctx.font = "12px sans-serif";
        ctx.textAlign = "right";
        ctx.fillText(student, 130, 5);
        ctx.restore();
      });
    }

    function spinWheel() {
      if (students.length === 0) return;
      let duration = 3000;
      let spinAngle = Math.floor(360 * 5 + Math.random() * 360);
      let start = null;

      function animate(timestamp) {
        if (!start) start = timestamp;
        const progress = timestamp - start;
        const ease = 1 - Math.pow(1 - progress / duration, 3);
        currentAngle = (spinAngle * ease) % 360;
        canvas.style.transform = `rotate(${currentAngle}deg)`;
        if (progress < duration) {
          requestAnimationFrame(animate);
        } else {
          const winnerIndex = Math.floor((students.length * (360 - (currentAngle % 360))) / 360) % students.length;
          const winner = students[winnerIndex];
          selectedName.textContent = `ðŸŽ‰ Selected: ${winner}!`;
          history.unshift(winner);
          updateHistory();
          students.splice(winnerIndex, 1);
          drawWheel();
        }
      }

      requestAnimationFrame(animate);
    }

    function updateHistory() {
      historyList.innerHTML = history.map(name => `<li>${name}</li>`).join("");
    }

    updateNames();
  </script>
</body>
</html>
